@startuml Resume Service Exception Package

!define EXCEPTION_COLOR #FFCDD2
!define DTO_COLOR #E1BEE7

skinparam backgroundColor #FAFAFA
skinparam classAttributeIconSize 0
skinparam shadowing false
skinparam roundcorner 5
skinparam packageStyle rectangle

package "com.careernexus.resumeservice.exception" <<Rectangle>> {

    abstract class ResumeServiceException <<BaseException>> EXCEPTION_COLOR {
        + ResumeServiceException(message: String)
        + ResumeServiceException(message: String, cause: Throwable)
    }

    class ResumeNotFoundException <<Exception>> EXCEPTION_COLOR {
        + ResumeNotFoundException(resumeId: Long)
    }

    class InvalidFileException <<Exception>> EXCEPTION_COLOR {
        + InvalidFileException(message: String)
    }

    class ResumeParseException <<Exception>> EXCEPTION_COLOR {
        + ResumeParseException(message: String, cause: Throwable)
    }

    class StorageException <<Exception>> EXCEPTION_COLOR {
        + StorageException(message: String)
    }

    class GlobalExceptionHandler <<ControllerAdvice>> EXCEPTION_COLOR {
        + handleResumeNotFoundException(ex: ResumeNotFoundException): ResponseEntity<ErrorResponse>
        + handleInvalidFileException(ex: InvalidFileException): ResponseEntity<ErrorResponse>
        + handleResumeParseException(ex: ResumeParseException): ResponseEntity<ErrorResponse>
        + handleStorageException(ex: StorageException): ResponseEntity<ErrorResponse>
        + handleGenericException(ex: Exception): ResponseEntity<ErrorResponse>
    }

    class ErrorResponse <<DTO>> DTO_COLOR {
        - timestamp: LocalDateTime
        - status: int
        - error: String
        - message: String
        - path: String
        --
        + getters/setters()
    }
}

ResumeNotFoundException ..|> ResumeServiceException
InvalidFileException ..|> ResumeServiceException
ResumeParseException ..|> ResumeServiceException
StorageException ..|> ResumeServiceException

GlobalExceptionHandler ..> ErrorResponse : creates
GlobalExceptionHandler ..> ResumeServiceException : handles

@enduml